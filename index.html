<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Billzen - Générateur de Factures Professionnelles</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div id="app">
        <header class="app-header">
            <div class="app-logo">
                <span class="logo-text">Billzen</span>
                <span class="logo-tagline">Factures Professionnelles</span>
            </div>
        </header>
        
        <main class="app-main">
            <div id="invoice-container">
                <!-- Prévisualisation de la facture -->
                <div class="invoice-preview" id="invoice-preview">
                    <div class="invoice-header">
                        <div class="company-info">
                            <div class="company-logo" id="company-logo-display">Logo</div>
                            <div class="company-details">
                                <h2 id="company-name-display">Nom de l'entreprise</h2>
                                <div id="company-address-display">Adresse de l'entreprise</div>
                                <div id="company-contact-display">
                                    <div id="company-phone-display">Téléphone</div>
                                    <div id="company-email-display">Email</div>
                                </div>
                            </div>
                        </div>
                        <div class="invoice-info">
                            <h3>FACTURE</h3>
                            <div class="invoice-meta">
                                <div>N° <span id="invoice-number-display">001</span></div>
                                <div>Date: <span id="invoice-date-display"></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="invoice-body">
                        <div class="legal-info" id="legal-info-display"></div>
                        
                        <div class="invoice-items">
                            <table class="items-table">
                                <thead>
                                    <tr>
                                        <th id="col-reference">Référence</th>
                                        <th id="col-description">Description</th>
                                        <th id="col-quantity">Qté</th>
                                        <th id="col-unit-price">Prix Unit.</th>
                                        <th id="col-discount">Remise</th>
                                        <th id="col-vat">TVA</th>
                                        <th id="col-total">Total</th>
                                    </tr>
                                </thead>
                                <tbody id="items-list">
                                    <!-- Articles seront ajoutés dynamiquement -->
                                </tbody>
                            </table>

                            <table class="hourly-table">
                                <thead>
                                    <tr>
                                        <th id="col-hourly-description">Prestation</th>
                                        <th id="col-hours">Heures</th>
                                        <th id="col-hourly-rate">Taux/h</th>
                                        <th id="col-hourly-total">Total</th>
                                    </tr>
                                </thead>
                                <tbody id="hourly-items-list">
                                    <!-- Prestations horaires seront ajoutées dynamiquement -->
                                </tbody>
                            </table>
                        </div>

                        <div class="invoice-totals">
                            <div class="totals-row">
                                <span>Sous-total HT:</span>
                                <span id="subtotal-ht">0,00 €</span>
                            </div>
                            <div class="totals-row">
                                <span>Total remises:</span>
                                <span id="total-discount">0,00 €</span>
                            </div>
                            <div class="totals-row">
                                <span>Total TVA:</span>
                                <span id="total-vat">0,00 €</span>
                            </div>
                            <div class="totals-row total-final">
                                <span>Total TTC:</span>
                                <span id="total-ttc">0,00 €</span>
                            </div>
                        </div>
                    </div>

                    <div class="invoice-footer">
                        <div id="payment-method-display">Mode de paiement: Virement bancaire</div>
                        <div id="footer-text-display">Merci pour votre confiance</div>
                    </div>
                </div>
                
                <!-- Contrôles de saisie -->
                <div class="invoice-controls">
                    <div class="control-section">
                        <h3>Informations Entreprise</h3>
                        <div class="form-group">
                            <label for="company-name">Nom de l'entreprise *</label>
                            <input type="text" id="company-name" class="input" required>
                        </div>
                        <div class="form-group">
                            <label for="company-logo">Logo</label>
                            <input type="file" id="company-logo" accept="image/*" class="input">
                            <small class="form-help">Formats acceptés: JPG, PNG, GIF, WebP, SVG (max 5MB). Cliquez sur la zone de logo pour changer.</small>
                        </div>
                        <div class="form-group">
                            <label for="company-address">Adresse *</label>
                            <textarea id="company-address" class="input" rows="3" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="company-phone">Téléphone *</label>
                            <input type="tel" id="company-phone" class="input" required>
                        </div>
                        <div class="form-group">
                            <label for="company-email">Email *</label>
                            <input type="email" id="company-email" class="input" required>
                        </div>
                        <div class="form-group">
                            <label for="legal-info">Informations légales</label>
                            <textarea id="legal-info" class="input" rows="2" placeholder="SIRET, TVA intracommunautaire, etc."></textarea>
                        </div>
                        <div class="form-group">
                            <label for="invoice-number">Numéro de facture *</label>
                            <input type="text" id="invoice-number" class="input" required value="001">
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>Articles</h3>
                        <div class="form-group">
                            <label for="item-reference">Référence *</label>
                            <input type="text" id="item-reference" class="input" required>
                        </div>
                        <div class="form-group">
                            <label for="item-description">Description *</label>
                            <input type="text" id="item-description" class="input" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="item-quantity">Quantité *</label>
                                <input type="number" id="item-quantity" class="input" min="0.01" step="0.01" required>
                            </div>
                            <div class="form-group">
                                <label for="item-unit-price">Prix unitaire *</label>
                                <input type="number" id="item-unit-price" class="input" min="0.01" step="0.01" required>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="item-discount">Remise (%)</label>
                                <input type="number" id="item-discount" class="input" min="0" max="100" step="0.01" value="0">
                            </div>
                            <div class="form-group">
                                <label for="item-vat">TVA (%)</label>
                                <input type="number" id="item-vat" class="input" min="0" max="50" step="0.01" value="20">
                            </div>
                        </div>
                        <div class="preview-total">
                            <span>Total prévisualisation: </span>
                            <span id="item-preview-total" class="preview-amount">0,00 €</span>
                        </div>
                        <button type="button" id="add-item" class="btn btn-primary">Ajouter Article</button>
                    </div>

                    <div class="control-section">
                        <h3>Prestations Horaires</h3>
                        <div class="form-group">
                            <label for="hourly-description">Description *</label>
                            <input type="text" id="hourly-description" class="input" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="hourly-hours">Heures *</label>
                                <input type="number" id="hourly-hours" class="input" min="0.1" step="0.1" required>
                            </div>
                            <div class="form-group">
                                <label for="hourly-rate">Taux horaire *</label>
                                <input type="number" id="hourly-rate" class="input" min="1" step="0.01" required>
                            </div>
                        </div>
                        <div class="preview-total">
                            <span>Total prévisualisation: </span>
                            <span id="hourly-preview-total" class="preview-amount">0,00 €</span>
                        </div>
                        <button type="button" id="add-hourly-item" class="btn btn-primary">Ajouter Prestation</button>
                    </div>

                    <div class="control-section">
                        <h3>Personnalisation</h3>
                        <div class="form-group">
                            <label for="currency-select">Devise</label>
                            <select id="currency-select" class="input">
                                <option value="EUR">EUR (€) - Euro</option>
                                <option value="USD">USD ($) - US Dollar</option>
                                <option value="GBP">GBP (£) - British Pound</option>
                                <option value="JPY">JPY (¥) - Japanese Yen</option>
                                <option value="CHF">CHF - Swiss Franc</option>
                                <option value="CAD">CAD (C$) - Canadian Dollar</option>
                                <option value="AUD">AUD (A$) - Australian Dollar</option>
                                <option value="CNY">CNY (¥) - Chinese Yuan</option>
                                <option value="SEK">SEK (kr) - Swedish Krona</option>
                                <option value="NOK">NOK (kr) - Norwegian Krone</option>
                                <option value="DKK">DKK (kr) - Danish Krone</option>
                                <option value="PLN">PLN (zł) - Polish Zloty</option>
                                <option value="CZK">CZK (Kč) - Czech Koruna</option>
                                <option value="HUF">HUF (Ft) - Hungarian Forint</option>
                                <option value="RUB">RUB (₽) - Russian Ruble</option>
                                <option value="BRL">BRL (R$) - Brazilian Real</option>
                                <option value="MXN">MXN ($) - Mexican Peso</option>
                                <option value="INR">INR (₹) - Indian Rupee</option>
                                <option value="KRW">KRW (₩) - South Korean Won</option>
                                <option value="SGD">SGD (S$) - Singapore Dollar</option>
                                <option value="HKD">HKD (HK$) - Hong Kong Dollar</option>
                                <option value="NZD">NZD (NZ$) - New Zealand Dollar</option>
                                <option value="ZAR">ZAR (R) - South African Rand</option>
                                <option value="TRY">TRY (₺) - Turkish Lira</option>
                                <option value="ILS">ILS (₪) - Israeli Shekel</option>
                                <option value="AED">AED (د.إ) - UAE Dirham</option>
                                <option value="SAR">SAR (﷼) - Saudi Riyal</option>
                                <option value="EGP">EGP (£) - Egyptian Pound</option>
                                <option value="MAD">MAD (د.م.) - Moroccan Dirham</option>
                                <option value="TND">TND (د.ت) - Tunisian Dinar</option>
                                <option value="NGN">NGN (₦) - Nigerian Naira</option>
                                <option value="KES">KES (KSh) - Kenyan Shilling</option>
                                <option value="GHS">GHS (₵) - Ghanaian Cedi</option>
                                <option value="XOF">XOF (CFA) - West African CFA Franc</option>
                                <option value="XAF">XAF (FCFA) - Central African CFA Franc</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="theme-select">Thème</label>
                            <select id="theme-select" class="input">
                                <option value="default">Défaut</option>
                                <option value="modern">Moderne</option>
                                <option value="classic">Classique</option>
                                <option value="corporate">Corporate</option>
                                <option value="elegant">Élégant</option>
                                <option value="minimal">Minimal</option>
                                <option value="creative">Créatif</option>
                            </select>
                        </div>
                        
                        <div class="customization-subsection">
                            <h4>Couleurs personnalisées</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="text-color">Couleur du texte</label>
                                    <input type="color" id="text-color" class="input color-input" value="#020617">
                                </div>
                                <div class="form-group">
                                    <label for="background-color">Couleur de fond</label>
                                    <input type="color" id="background-color" class="input color-input" value="#ffffff">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="primary-color">Couleur primaire</label>
                                    <input type="color" id="primary-color" class="input color-input" value="#2563eb">
                                </div>
                                <div class="form-group">
                                    <label for="accent-color">Couleur d'accent</label>
                                    <input type="color" id="accent-color" class="input color-input" value="#22c55e">
                                </div>
                            </div>
                        </div>
                        
                        <div class="customization-subsection">
                            <h4>Polices</h4>
                            <div class="form-group">
                                <label for="header-font">Police d'en-tête</label>
                                <select id="header-font" class="input">
                                    <optgroup label="Sans-serif">
                                        <option value="'Inter', sans-serif">Inter</option>
                                        <option value="'Roboto', sans-serif">Roboto</option>
                                        <option value="'Open Sans', sans-serif">Open Sans</option>
                                        <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
                                        <option value="'Poppins', sans-serif">Poppins</option>
                                        <option value="'Montserrat', sans-serif">Montserrat</option>
                                        <option value="'Helvetica Neue', sans-serif">Helvetica Neue</option>
                                    </optgroup>
                                    <optgroup label="Serif">
                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                        <option value="'Georgia', serif">Georgia</option>
                                        <option value="'Playfair Display', serif">Playfair Display</option>
                                        <option value="'Merriweather', serif">Merriweather</option>
                                        <option value="'Crimson Text', serif">Crimson Text</option>
                                    </optgroup>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="body-font">Police du corps</label>
                                <select id="body-font" class="input">
                                    <optgroup label="Sans-serif">
                                        <option value="'Inter', sans-serif">Inter</option>
                                        <option value="'Roboto', sans-serif">Roboto</option>
                                        <option value="'Open Sans', sans-serif">Open Sans</option>
                                        <option value="'Source Sans Pro', sans-serif">Source Sans Pro</option>
                                        <option value="'Poppins', sans-serif">Poppins</option>
                                        <option value="'Montserrat', sans-serif">Montserrat</option>
                                        <option value="'Helvetica Neue', sans-serif">Helvetica Neue</option>
                                    </optgroup>
                                    <optgroup label="Serif">
                                        <option value="'Times New Roman', serif">Times New Roman</option>
                                        <option value="'Georgia', serif">Georgia</option>
                                        <option value="'Playfair Display', serif">Playfair Display</option>
                                        <option value="'Merriweather', serif">Merriweather</option>
                                        <option value="'Crimson Text', serif">Crimson Text</option>
                                    </optgroup>
                                </select>
                            </div>
                        </div>
                        
                        <div class="customization-subsection">
                            <h4>Options d'affichage</h4>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="uppercase-toggle" class="checkbox">
                                    <span class="checkmark"></span>
                                    Majuscules automatiques
                                </label>
                            </div>
                        </div>
                        
                        <div class="customization-subsection">
                            <h4>Titres de colonnes</h4>
                            <div class="form-group">
                                <label for="col-reference-edit">Référence</label>
                                <input type="text" id="col-reference-edit" class="input" value="Référence">
                            </div>
                            <div class="form-group">
                                <label for="col-description-edit">Description</label>
                                <input type="text" id="col-description-edit" class="input" value="Description">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="col-quantity-edit">Quantité</label>
                                    <input type="text" id="col-quantity-edit" class="input" value="Qté">
                                </div>
                                <div class="form-group">
                                    <label for="col-unit-price-edit">Prix unitaire</label>
                                    <input type="text" id="col-unit-price-edit" class="input" value="Prix Unit.">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="col-discount-edit">Remise</label>
                                    <input type="text" id="col-discount-edit" class="input" value="Remise">
                                </div>
                                <div class="form-group">
                                    <label for="col-vat-edit">TVA</label>
                                    <input type="text" id="col-vat-edit" class="input" value="TVA">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="col-total-edit">Total</label>
                                <input type="text" id="col-total-edit" class="input" value="Total">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="payment-method">Mode de paiement</label>
                            <input type="text" id="payment-method" class="input" value="Virement bancaire">
                        </div>
                        <div class="form-group">
                            <label for="footer-text">Texte de pied de page</label>
                            <input type="text" id="footer-text" class="input" value="Merci pour votre confiance">
                        </div>
                    </div>

                    <div class="control-section">
                        <h3>Export</h3>
                        <button type="button" id="export-pdf" class="btn btn-secondary">Exporter PDF</button>
                        <button type="button" id="export-jpg" class="btn btn-secondary">Exporter JPG</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="js/models/state.js"></script>
    <script src="js/calculators/ItemCalculator.js"></script>
    <script src="js/calculators/HourlyCalculator.js"></script>
    <script src="js/calculators/TotalCalculator.js"></script>
    <script src="js/reactive-system.js"></script>
    <script src="js/managers/InvoiceManager.js"></script>
    <script src="js/managers/ThemeManager.js"></script>
    <script src="js/managers/CurrencyManager.js"></script>
    <script src="js/engines/PDFEngine.js"></script>
    <script src="js/engines/ImageEngine.js"></script>
    <script src="js/ui-handlers.js"></script>
    <script src="js/invoice-engine.js"></script>
</body>
</html>